import{p as K}from"./punycode-CztA-yxd.js";import{l as N}from"./qs-DFpQOMvM.js";var V=K;function y(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var W=/^([a-z0-9.+-]+:)/i,X=/:[0-9]*$/,Y=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,Q=["<",">",'"',"`"," ","\r",`
`,"	"],S=["{","}","|","\\","^","`"].concat(Q),T=["'"].concat(S),M=["%","/","?",";","#"].concat(T),B=["/","?","#"],H=255,D=/^[+a-z0-9A-Z_-]{0,63}$/,k=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},Z={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=N;function U(s,e,t){if(s&&typeof s=="object"&&s instanceof y)return s;var f=new y;return f.parse(s,e,t),f}y.prototype.parse=function(s,e,t){if(typeof s!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof s);var f=s.indexOf("?"),n=f!==-1&&f<s.indexOf("#")?"?":"#",g=s.split(n),c=/\\/g;g[0]=g[0].replace(c,"/"),s=g.join(n);var h=s;if(h=h.trim(),!t&&s.split("#").length===1){var O=Y.exec(h);if(O)return this.path=h,this.href=h,this.pathname=O[1],O[2]?(this.search=O[2],e?this.query=_.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var p=W.exec(h);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,h=h.substr(p.length)}if(t||p||h.match(/^\/\/[^@/]+@[^@/]+/)){var P=h.substr(0,2)==="//";P&&!(p&&Z[p])&&(h=h.substr(2),this.slashes=!0)}if(!Z[p]&&(P||p&&!C[p])){for(var i=-1,o=0;o<B.length;o++){var b=h.indexOf(B[o]);b!==-1&&(i===-1||b<i)&&(i=b)}var v,u;i===-1?u=h.lastIndexOf("@"):u=h.lastIndexOf("@",i),u!==-1&&(v=h.slice(0,u),h=h.slice(u+1),this.auth=decodeURIComponent(v)),i=-1;for(var o=0;o<M.length;o++){var b=h.indexOf(M[o]);b!==-1&&(i===-1||b<i)&&(i=b)}i===-1&&(i=h.length),this.host=h.slice(0,i),h=h.slice(i),this.parseHost(),this.hostname=this.hostname||"";var I=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!I)for(var a=this.hostname.split(/\./),o=0,r=a.length;o<r;o++){var q=a[o];if(q&&!q.match(D)){for(var l="",m=0,$=q.length;m<$;m++)q.charCodeAt(m)>127?l+="x":l+=q[m];if(!l.match(D)){var A=a.slice(0,o),x=a.slice(o+1),j=q.match(k);j&&(A.push(j[1]),x.unshift(j[2])),x.length&&(h="/"+x.join(".")+h),this.hostname=A.join(".");break}}}this.hostname.length>H?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=V.toASCII(this.hostname));var z=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+z,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),h[0]!=="/"&&(h="/"+h))}if(!E[d])for(var o=0,r=T.length;o<r;o++){var R=T[o];if(h.indexOf(R)!==-1){var L=encodeURIComponent(R);L===R&&(L=escape(R)),h=h.split(R).join(L)}}var F=h.indexOf("#");F!==-1&&(this.hash=h.substr(F),h=h.slice(0,F));var w=h.indexOf("?");if(w!==-1?(this.search=h.substr(w),this.query=h.substr(w+1),e&&(this.query=_.parse(this.query)),h=h.slice(0,w)):e&&(this.search="",this.query={}),h&&(this.pathname=h),C[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var z=this.pathname||"",J=this.search||"";this.path=z+J}return this.href=this.format(),this};function tt(s){return typeof s=="string"&&(s=U(s)),s instanceof y?s.format():y.prototype.format.call(s)}y.prototype.format=function(){var s=this.auth||"";s&&(s=encodeURIComponent(s),s=s.replace(/%3A/i,":"),s+="@");var e=this.protocol||"",t=this.pathname||"",f=this.hash||"",n=!1,g="";this.host?n=s+this.host:this.hostname&&(n=s+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(g=_.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var c=this.search||g&&"?"+g||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||C[e])&&n!==!1?(n="//"+(n||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):n||(n=""),f&&f.charAt(0)!=="#"&&(f="#"+f),c&&c.charAt(0)!=="?"&&(c="?"+c),t=t.replace(/[?#]/g,function(h){return encodeURIComponent(h)}),c=c.replace("#","%23"),e+n+t+c+f};function st(s,e){return U(s,!1,!0).resolve(e)}y.prototype.resolve=function(s){return this.resolveObject(U(s,!1,!0)).format()};y.prototype.resolveObject=function(s){if(typeof s=="string"){var e=new y;e.parse(s,!1,!0),s=e}for(var t=new y,f=Object.keys(this),n=0;n<f.length;n++){var g=f[n];t[g]=this[g]}if(t.hash=s.hash,s.href==="")return t.href=t.format(),t;if(s.slashes&&!s.protocol){for(var c=Object.keys(s),h=0;h<c.length;h++){var O=c[h];O!=="protocol"&&(t[O]=s[O])}return C[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(s.protocol&&s.protocol!==t.protocol){if(!C[s.protocol]){for(var p=Object.keys(s),d=0;d<p.length;d++){var P=p[d];t[P]=s[P]}return t.href=t.format(),t}if(t.protocol=s.protocol,!s.host&&!Z[s.protocol]){for(var r=(s.pathname||"").split("/");r.length&&!(s.host=r.shift()););s.host||(s.host=""),s.hostname||(s.hostname=""),r[0]!==""&&r.unshift(""),r.length<2&&r.unshift(""),t.pathname=r.join("/")}else t.pathname=s.pathname;if(t.search=s.search,t.query=s.query,t.host=s.host||"",t.auth=s.auth,t.hostname=s.hostname||s.host,t.port=s.port,t.pathname||t.search){var i=t.pathname||"",o=t.search||"";t.path=i+o}return t.slashes=t.slashes||s.slashes,t.href=t.format(),t}var b=t.pathname&&t.pathname.charAt(0)==="/",v=s.host||s.pathname&&s.pathname.charAt(0)==="/",u=v||b||t.host&&s.pathname,I=u,a=t.pathname&&t.pathname.split("/")||[],r=s.pathname&&s.pathname.split("/")||[],q=t.protocol&&!C[t.protocol];if(q&&(t.hostname="",t.port=null,t.host&&(a[0]===""?a[0]=t.host:a.unshift(t.host)),t.host="",s.protocol&&(s.hostname=null,s.port=null,s.host&&(r[0]===""?r[0]=s.host:r.unshift(s.host)),s.host=null),u=u&&(r[0]===""||a[0]==="")),v)t.host=s.host||s.host===""?s.host:t.host,t.hostname=s.hostname||s.hostname===""?s.hostname:t.hostname,t.search=s.search,t.query=s.query,a=r;else if(r.length)a||(a=[]),a.pop(),a=a.concat(r),t.search=s.search,t.query=s.query;else if(s.search!=null){if(q){t.host=a.shift(),t.hostname=t.host;var l=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;l&&(t.auth=l.shift(),t.hostname=l.shift(),t.host=t.hostname)}return t.search=s.search,t.query=s.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!a.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var m=a.slice(-1)[0],$=(t.host||s.host||a.length>1)&&(m==="."||m==="..")||m==="",A=0,x=a.length;x>=0;x--)m=a[x],m==="."?a.splice(x,1):m===".."?(a.splice(x,1),A++):A&&(a.splice(x,1),A--);if(!u&&!I)for(;A--;A)a.unshift("..");u&&a[0]!==""&&(!a[0]||a[0].charAt(0)!=="/")&&a.unshift(""),$&&a.join("/").substr(-1)!=="/"&&a.push("");var j=a[0]===""||a[0]&&a[0].charAt(0)==="/";if(q){t.hostname=j?"":a.length?a.shift():"",t.host=t.hostname;var l=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;l&&(t.auth=l.shift(),t.hostname=l.shift(),t.host=t.hostname)}return u=u||t.host&&a.length,u&&!j&&a.unshift(""),a.length>0?t.pathname=a.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=s.auth||t.auth,t.slashes=t.slashes||s.slashes,t.href=t.format(),t};y.prototype.parseHost=function(){var s=this.host,e=X.exec(s);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),s=s.substr(0,s.length-e.length)),s&&(this.hostname=s)};var et=U,ot=st,rt=tt;export{rt as f,et as p,ot as r};
