function w(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}function b(t){var n=this;return new n(function(e,r){if(!(t&&typeof t.length<"u"))return r(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(t);if(i.length===0)return e([]);var a=i.length;function u(f,s){if(s&&(typeof s=="object"||typeof s=="function")){var h=s.then;if(typeof h=="function"){h.call(s,function(y){u(f,y)},function(y){i[f]={status:"rejected",reason:y},--a===0&&e(i)});return}}i[f]={status:"fulfilled",value:s},--a===0&&e(i)}for(var c=0;c<i.length;c++)u(c,i[c])})}function m(t,n){this.name="AggregateError",this.errors=t,this.message=n||""}m.prototype=Error.prototype;function E(t){var n=this;return new n(function(e,r){if(!(t&&typeof t.length<"u"))return r(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(t);if(i.length===0)return r();for(var a=[],u=0;u<i.length;u++)try{n.resolve(i[u]).then(e).catch(function(c){a.push(c),a.length===i.length&&r(new m(a,"All promises were rejected"))})}catch(c){r(c)}})}var P=setTimeout;function _(t){return!!(t&&typeof t.length<"u")}function j(){}function T(t,n){return function(){t.apply(n,arguments)}}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],v(t,this)}function g(t,n){for(;t._state===3;)t=t._value;if(t._state===0){t._deferreds.push(n);return}t._handled=!0,o._immediateFn(function(){var e=t._state===1?n.onFulfilled:n.onRejected;if(e===null){(t._state===1?l:p)(n.promise,t._value);return}var r;try{r=e(t._value)}catch(i){p(n.promise,i);return}l(n.promise,r)})}function l(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&(typeof n=="object"||typeof n=="function")){var e=n.then;if(n instanceof o){t._state=3,t._value=n,d(t);return}else if(typeof e=="function"){v(T(e,n),t);return}}t._state=1,t._value=n,d(t)}catch(r){p(t,r)}}function p(t,n){t._state=2,t._value=n,d(t)}function d(t){t._state===2&&t._deferreds.length===0&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var n=0,e=t._deferreds.length;n<e;n++)g(t,t._deferreds[n]);t._deferreds=null}function A(t,n,e){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.promise=e}function v(t,n){var e=!1;try{t(function(r){e||(e=!0,l(n,r))},function(r){e||(e=!0,p(n,r))})}catch(r){if(e)return;e=!0,p(n,r)}}o.prototype.catch=function(t){return this.then(null,t)};o.prototype.then=function(t,n){var e=new this.constructor(j);return g(this,new A(t,n,e)),e};o.prototype.finally=w;o.all=function(t){return new o(function(n,e){if(!_(t))return e(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(r.length===0)return n([]);var i=r.length;function a(c,f){try{if(f&&(typeof f=="object"||typeof f=="function")){var s=f.then;if(typeof s=="function"){s.call(f,function(h){a(c,h)},e);return}}r[c]=f,--i===0&&n(r)}catch(h){e(h)}}for(var u=0;u<r.length;u++)a(u,r[u])})};o.any=E;o.allSettled=b;o.resolve=function(t){return t&&typeof t=="object"&&t.constructor===o?t:new o(function(n){n(t)})};o.reject=function(t){return new o(function(n,e){e(t)})};o.race=function(t){return new o(function(n,e){if(!_(t))return e(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)o.resolve(t[r]).then(n,e)})};o._immediateFn=typeof setImmediate=="function"&&function(t){setImmediate(t)}||function(t){P(t,0)};o._unhandledRejectionFn=function(n){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};export{o as P};
